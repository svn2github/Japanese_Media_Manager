<UserControl x:Class="JMMClient.UserControls.DashboardControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:usercontrols="clr-namespace:JMMClient.UserControls"
             xmlns:extToolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit/extended"
             xmlns:local="clr-namespace:JMMClient"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    
    <UserControl.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/Styles.xaml" />
                <ResourceDictionary Source="/Resources/MainListStyles.xaml" />
                <ResourceDictionary Source="/Resources/MainListContent.xaml" />
            </ResourceDictionary.MergedDictionaries>
            
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            <local:DashWatchNextTemplateSelector x:Key="DashWatchNextTemplateSelector"/>

            <RoutedUICommand x:Key="PlayEpisodeCommand" Text="PlayEpisodeCommand" />
            <RoutedUICommand x:Key="ToggleWatchedStatusCommand" Text="ToggleWatchedStatusCommand" />
            <RoutedUICommand x:Key="IgnoreAnimeWatchCommand" Text="IgnoreAnimeWatchCommand" />
            <RoutedUICommand x:Key="IgnoreAnimeDownloadCommand" Text="IgnoreAnimeDownloadCommand" />
            
            

            <RoutedUICommand x:Key="MoveUpWidgetCommand" Text="MoveUpWidgetCommand" />
            <RoutedUICommand x:Key="MoveDownWidgetCommand" Text="MoveDownWidgetCommand" />
            

            <!-- WatchNextTemplate -->
            <DataTemplate x:Key="WatchNextTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- anime name and episode details -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" MaxWidth="150" Margin="5,3,5,0">
                            <TextBlock Text="{Binding Path=AnimeName}" Foreground="Black" FontWeight="DemiBold" VerticalAlignment="Center">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=AnimeName}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                            <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Foreground="Black" VerticalAlignment="Center" Margin="0,3,0,0">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>

                        </StackPanel>
                    </Border>

                    <!-- anime image  -->
                    <Border BorderThickness="1,0,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Height}"  Margin="5,3,5,0"
                               MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Height}" HorizontalAlignment="Left" 
                               Source="{Binding Path=AniDB_Anime.DefaultPosterPath}">
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=DisplayWidth_EpisodeImage}" 
                                               Source="{Binding EpisodeImageLoading}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding EpisodeOverviewLoading}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>


                    <!-- buttons   -->
                    <Border BorderThickness="1,0,1,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="5,3,5,5">
                       

                        <!-- Toggle watched button -->
                        <Button Name="btnToggleWatched" Margin="0,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                        Visibility="{Binding Path=HasFiles, Converter={StaticResource BooleanToVisibilityConverter}}"
                        Command="{DynamicResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/16_eye.png" Margin="2,0,2,0"
                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <Image.ToolTip>
                                        <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Watched}"/>
                                    </Image.ToolTip>
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/16_eye2.png" Margin="2,0,2,0"
                           Visibility="{Binding Path=Unwatched, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <Image.ToolTip>
                                        <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                    </Image.ToolTip>
                                </Image>
                            </StackPanel>
                        </Button>

                        <!-- Play episode button -->
                        <Button Name="btnPlay" Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" Command="{DynamicResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                        VerticalAlignment="Center">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/32_play.png" Margin="0,0,5,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Play}" Margin="0,0,5,0"/>
                            </StackPanel>
                        </Button>

                        <!-- show pinned series button -->
                        <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                Command="{DynamicResource ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0">
                                    <Image.ToolTip>
                                        <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                    </Image.ToolTip>
                                </Image>

                            </StackPanel>
                        </Button>

                        </StackPanel>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- WatchNextTemplate_Detailed -->
            <DataTemplate x:Key="WatchNextTemplate_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- anime name and episode details -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <TextBlock Text="{Binding Path=AnimeName}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=AnimeName}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                            <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Foreground="Black" VerticalAlignment="Center" Margin="0,3,0,0">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=EpisodeNumberAndName}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>

                        </StackPanel>
                    </Border>

                    <!-- anime image  -->
                    <Border BorderThickness="1,0,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Height}"  Margin="5,3,10,0"
                               HorizontalAlignment="Left" 
                               Source="{Binding Path=AniDB_Anime.DefaultPosterPath}">
                        </Image>

                    </Border>

                    <!-- Episode Overview  -->
                    <Border BorderThickness="0,0,0,0" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock  MaxWidth="200"  Text="{Binding EpisodeOverviewLoading}" HorizontalAlignment="Left" Margin="0,0,5,0" 
                                    Visibility="{Binding ShowEpisodeOverviewInExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Height}"
                                                       VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- Episode Image  -->
                    <Border BorderThickness="0,0,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Source="{Binding EpisodeImageLoading}" 
                                Visibility="{Binding ShowEpisodeImageInDashboard, Converter={StaticResource BooleanToVisibilityConverter}}"
                               Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Height}"
                               Margin="5,5,5,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="400" 
                                               Source="{Binding EpisodeImageLoading}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding EpisodeOverviewLoading}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    <!-- buttons   -->
                    <Border BorderThickness="1,0,1,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="3" 
                            Background="FloralWhite">
                        <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="5,3,5,5">


                            <!-- Toggle watched button -->
                            <Button Name="btnToggleWatched" Margin="0,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                        Visibility="{Binding Path=HasFiles, Converter={StaticResource BooleanToVisibilityConverter}}"
                        Command="{DynamicResource ToggleWatchedStatusCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_eye.png" Margin="2,0,2,0"
                           Visibility="{Binding Path=Watched, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Watched}"/>
                                        </Image.ToolTip>
                                    </Image>
                                    <Image Height="16" Width="16" Source="/Images/16_eye2.png" Margin="2,0,2,0"
                           Visibility="{Binding Path=Unwatched, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_Unwatched}"/>
                                        </Image.ToolTip>
                                    </Image>
                                </StackPanel>
                            </Button>

                            <!-- Play episode button -->
                            <Button Name="btnPlay" Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" Command="{DynamicResource PlayEpisodeCommand}" CommandParameter="{Binding}"
                        VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/32_play.png" Margin="0,0,5,0"/>
                                    <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Play}" Margin="0,0,5,0"/>
                                </StackPanel>
                            </Button>

                            <!-- show pinned series button -->
                            <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                        </Image.ToolTip>
                                    </Image>
                                    
                                </StackPanel>
                            </Button>

                        </StackPanel>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- SeriesMissingEpsTemplate -->
            <DataTemplate x:Key="SeriesMissingEpsTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- anime name -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" MaxWidth="150" Margin="5,3,5,0">
                            <TextBlock Text="{Binding Path=SeriesName}" Foreground="Black" FontWeight="DemiBold" VerticalAlignment="Center">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=SeriesName}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                            

                        </StackPanel>
                    </Border>

                    <!-- anime image  -->
                    <Border BorderThickness="1,0,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2"
                            Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MissingEps_Height}"  Margin="5,3,5,0"
                               MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MissingEps_Height}" HorizontalAlignment="Left" 
                               Source="{Binding Path=AniDB_Anime.DefaultPosterPath}">
                            <Image.ToolTip>
                                <Image Stretch="Fill" HorizontalAlignment="Center" Height="400" Source="{Binding AniDB_Anime.DefaultPosterPath}">
                                </Image>
                            </Image.ToolTip>
                        </Image>
                    </Border>


                    <!-- info   -->
                    <Border BorderThickness="1,0,1,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2"
                            Background="FloralWhite">



                        <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left">
                            <!-- show pinned series button -->
                            <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="2,0,2,0">
                                        <Image.ToolTip>
                                            <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                        </Image.ToolTip>
                                    </Image>

                                </StackPanel>
                            </Button>

                            <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">

                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left">
                                    <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=LatestEp_Anime}" Margin="0,5,5,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding Path=AniDB_Anime.LatestEpisodeNumber}" Margin="0,5,5,0" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left">
                                    <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=MissingEpisodeCount}" Margin="0,5,5,0" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding Path=MissingEpisodeCountGroups}" Margin="0,5,5,0" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>

                            </StackPanel>
                        </StackPanel>
                        
                        
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- MiniCalendarTemplate -->
            <DataTemplate x:Key="MiniCalendarTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- anime name -->
                    <Border BorderThickness="1,1,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2"
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" MaxWidth="150" Margin="5,3,5,0">
                            <TextBlock Text="{Binding Path=FormattedTitle}" Foreground="Black" FontWeight="DemiBold" VerticalAlignment="Center">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=FormattedTitle}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                            <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=AnimeID_Friendly}" URL="{Binding Path=AniDB_SiteURL}" Margin="0,0,0,0"/>

                        </StackPanel>
                    </Border>

                    <!-- anime image  -->
                    <Border BorderThickness="1,0,1,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" 
                            Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MiniCalendar_Height}" Margin="5,3,5,0"
                               MaxWidth="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MiniCalendar_Height}" HorizontalAlignment="Left" 
                               Source="{Binding Path=DefaultPosterPath}">
                            <Image.ToolTip>

                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding DefaultPosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Description}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                                
                            </Image.ToolTip>
                        </Image>
                    </Border>


                    <!-- info   -->
                    <Border BorderThickness="1,0,1,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2"
                            Background="FloralWhite">
                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">

                            <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left">

                                <!-- show create series from button -->
                                <Button Margin="0,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                        Command="{DynamicResource CreateSeriesFromAnimeCommand}" CommandParameter="{Binding}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_television.png" Margin="2,0,2,0">
                                            <Image.ToolTip>
                                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_CreateSeries}"/>
                                            </Image.ToolTip>
                                        </Image>

                                    </StackPanel>
                                </Button>
                                
                                <Image Height="16" Width="16" Source="/Images/32_calendar.png" Margin="5,0,5,0" VerticalAlignment="Center"/>
                                <TextBlock Grid.Row="1" Grid.Column="2" Padding="5" Text="{Binding Path=AirDateAsString}" VerticalAlignment="Center"/>
                            </StackPanel>

                            

                        </StackPanel>
                    </Border>
                </Grid>
            </DataTemplate>

            <!-- RecWatch_Detailed -->
            <DataTemplate x:Key="RecWatch_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- recommended anime name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>

                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=RecommendedAnimeID}" URL="{Binding Path=Recommended_AniDB_SiteURL}" Margin="5,0,0,0"/>

                                <!-- show pinned series button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource ShowPinnedSeriesCommand}" CommandParameter="{Binding}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/16_windows.png" Margin="1,0,1,0">
                                            <Image.ToolTip>
                                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_ViewSeries}"/>
                                            </Image.ToolTip>
                                        </Image>

                                    </StackPanel>
                                </Button>

                                <!-- ignore anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource IgnoreAnimeWatchCommand}" CommandParameter="{Binding}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/32_cancel.png" Margin="1,0,1,0">
                                            <Image.ToolTip>
                                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_IgnoreAnimeWatch}"/>
                                            </Image.ToolTip>
                                        </Image>

                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Approval" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=Recommended_ApprovalRating}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>
                            
                        </StackPanel>
                    </Border>

                    <!-- recommended anime image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=Recommended_PosterPath}">
                            <Image.ToolTip>

                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding Recommended_PosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Recommended_Description}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>

                            </Image.ToolTip>
                        </Image>

                    </Border>

                    <!-- recommended anime description  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock  MaxWidth="200"  Text="{Binding Recommended_Description}" HorizontalAlignment="Left" Margin="0,0,5,5" 
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Height}"
                                                       VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- based on anime name and details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="0" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontSize="12" VerticalAlignment="Center">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Your Vote" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=BasedOnVoteValueFormatted}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>

                        </StackPanel>
                    </Border>

                    <!-- based on anime image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=BasedOn_PosterPath}">
                            <Image.ToolTip>

                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding BasedOn_PosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>

                            </Image.ToolTip>
                        </Image>

                    </Border>

                </Grid>
            </DataTemplate>

            <!-- RecDownload_Detailed -->
            <DataTemplate x:Key="RecDownload_Detailed">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- recommended anime name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=Recommended_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>

                                <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="{Binding Path=RecommendedAnimeID}" URL="{Binding Path=Recommended_AniDB_SiteURL}" Margin="5,0,0,0"/>

                                <!-- ignore anime button -->
                                <Button Margin="5,0,0,0" Style="{DynamicResource RoundButtonStyle}" VerticalAlignment="Center"
                                    Command="{DynamicResource IgnoreAnimeDownloadCommand}" CommandParameter="{Binding}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                        <Image Height="16" Width="16" Source="/Images/32_cancel.png" Margin="1,0,1,0">
                                            <Image.ToolTip>
                                                <TextBlock Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Tooltip_IgnoreAnimeDownload}"/>
                                            </Image.ToolTip>
                                        </Image>

                                    </StackPanel>
                                </Button>

                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Approval" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=Recommended_ApprovalRating}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>

                        </StackPanel>
                    </Border>

                    <!-- recommended anime image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=Recommended_PosterPath}">
                            <Image.ToolTip>

                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding Recommended_PosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding Recommended_Description}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>

                            </Image.ToolTip>
                        </Image>

                    </Border>

                    <!-- recommended anime description  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock  MaxWidth="200"  Text="{Binding Recommended_Description}" HorizontalAlignment="Left" Margin="0,0,5,5" 
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Height}"
                                                       VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- based on anime name and details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="0" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                                <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontSize="12" VerticalAlignment="Center">
                                    <TextBlock.ToolTip>
                                        <TextBlock Text="{Binding Path=BasedOn_DisplayName}" Foreground="Black" FontWeight="DemiBold"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,0,0,0">
                                <TextBlock Text="Your Vote" Foreground="DarkGreen" FontWeight="Medium" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=BasedOnVoteValueFormatted}" Foreground="Black" VerticalAlignment="Center" Margin="5,0,0,0"/>
                            </StackPanel>

                        </StackPanel>
                    </Border>

                    <!-- based on anime image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Height}"  Margin="5,3,10,5"
                               HorizontalAlignment="Left" Source="{Binding Path=BasedOn_PosterPath}">
                            <Image.ToolTip>

                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Height="400" Source="{Binding BasedOn_PosterPath}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>
                                    </Grid>
                                </Border>

                            </Image.ToolTip>
                        </Image>

                    </Border>

                </Grid>
            </DataTemplate>

            <!-- TraktFriendTemplate -->
            <DataTemplate x:Key="TraktFriendTemplate">
                <Grid Margin="0,0,5,5" VerticalAlignment="Top">


                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- user name and details -->
                    <Border BorderThickness="1,1,0,0" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="1" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="5,3,5,5">
                            <TextBlock Text="{Binding Path=Username}" FontWeight="Bold" FontSize="14" Foreground="DarkBlue" VerticalAlignment="Center">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Username}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>
                            <usercontrols:HyperLinkStandard VerticalAlignment="Center" DisplayText="View User on Trakt" URL="{Binding Path=Url}" Margin="0,0,0,0"/>
                            <TextBlock Text="{Binding Path=Full_name}" Foreground="Black" VerticalAlignment="Center" Margin="0,3,0,0">
                                <TextBlock.ToolTip>
                                    <TextBlock Text="{Binding Path=Full_name}" Foreground="Black" FontWeight="DemiBold"/>
                                </TextBlock.ToolTip>
                            </TextBlock>

                        </StackPanel>
                    </Border>

                    <!-- avatar image  -->
                    <Border BorderThickness="1,0,0,1" BorderBrush="DarkGray" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image  Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"  Margin="5,3,10,0"
                               HorizontalAlignment="Left" 
                               Source="{Binding ImagePathForDisplay}">
                        </Image>

                    </Border>

                    <!-- watched details -->
                    <Border BorderThickness="0,1,1,0" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="0" Grid.ColumnSpan="2" 
                            Background="FloralWhite">

                        <StackPanel Orientation="Vertical"  HorizontalAlignment="Left" Margin="0,3,5,5">
                            <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,0,5,5">
                                <TextBlock Text="Most Recently Watched" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center"/>
                                <TextBlock Text="{Binding Path=LastEpisodeWatched.WatchedDateAsString}" Foreground="Black" VerticalAlignment="Center" Margin="10,0,0,0"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"  HorizontalAlignment="Left" Margin="0,3,5,5">
                                <TextBlock Text="{Binding Path=LastEpisodeWatched.ShowTitle}" Foreground="Black" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center"/>


                                <TextBlock Text="{Binding Path=LastEpisodeWatched.Episode_Season}" Foreground="DarkGreen" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center" Margin="10,0,0,0"/>
                                <TextBlock Text="x" Foreground="DarkGreen" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center" Margin="0,0,0,0"/>
                                <TextBlock Text="{Binding Path=LastEpisodeWatched.Episode_Number}" Foreground="DarkGreen" FontWeight="DemiBold" FontSize="14" VerticalAlignment="Center" Margin="0,0,0,0"/>

                                <TextBlock Text="{Binding Path=LastEpisodeWatched.Episode_Title}" Foreground="DarkGreen" FontSize="14" VerticalAlignment="Center" Margin="10,0,0,0"/>

                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Episode Overview  -->
                    <Border BorderThickness="0,0,0,1" BorderBrush="DarkGray" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <TextBlock  MaxWidth="200" Text="{Binding LastEpisodeWatched.Episode_Overview}" HorizontalAlignment="Left" Margin="0,0,5,0" 
                                    Visibility="{Binding ShowEpisodeOverviewInExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                                   Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                                                       VerticalAlignment="Top"  TextWrapping="Wrap">
                        </TextBlock>
                    </Border>

                    <!-- Episode Image  -->
                    <Border BorderThickness="0,0,1,1" BorderBrush="DarkGray" Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="1" Background="FloralWhite">
                        <Image Source="{Binding LastEpisodeWatched.ImagePathForDisplay}" 
                                Visibility="{Binding ShowEpisodeImageInDashboard, Converter={StaticResource BooleanToVisibilityConverter}}"
                               Height="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_TraktFriends_Height}"
                               Margin="5,5,5,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                            <Image.ToolTip>
                                <Border Background="FloralWhite" BorderThickness="1" BorderBrush="DarkGray">
                                    <Grid >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="300"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>

                                        <Image Grid.Column="0" Grid.Row="0" Width="400" 
                                               Source="{Binding LastEpisodeWatched.ImagePathForDisplay}" 
                                                Margin="10,5,0,5" VerticalAlignment="Top" HorizontalAlignment="Left">
                                        </Image>

                                        <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding LastEpisodeWatched.Episode_Overview}" HorizontalAlignment="Left" Margin="10,5,0,5" 
                                                   VerticalAlignment="Top"  TextWrapping="Wrap">
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </Image.ToolTip>
                        </Image>
                    </Border>

                    
                </Grid>
            </DataTemplate>

        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.CommandBindings>
        
        <CommandBinding Command="{StaticResource PlayEpisodeCommand}" Executed="CommandBinding_PlayEpisode" />
        <CommandBinding Command="{StaticResource ToggleWatchedStatusCommand}" Executed="CommandBinding_ToggleWatchedStatus" />
        <CommandBinding Command="{StaticResource IgnoreAnimeWatchCommand}" Executed="CommandBinding_IgnoreAnimeWatch" />
        <CommandBinding Command="{StaticResource IgnoreAnimeDownloadCommand}" Executed="CommandBinding_IgnoreAnimeDownload" />
        
        <CommandBinding Command="{StaticResource MoveUpWidgetCommand}" Executed="CommandBinding_MoveUpWidget" />
        <CommandBinding Command="{StaticResource MoveDownWidgetCommand}" Executed="CommandBinding_MoveDownWidget" />
    </UserControl.CommandBindings>

    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Name="ScrollerDash" Grid.Column="0" Grid.Row="0" Margin="0,0,0,0" >
        <StackPanel Orientation="Vertical" Width="{Binding ElementName=ScrollerDash, Path=ViewportWidth}">


            <!-- toolbar -->
            <Grid>

                <Grid.RowDefinitions>
                    <RowDefinition MaxHeight="30" Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Toolbar -->
                <Border Style="{DynamicResource ToolbarBorderControlStyle}" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3">
                    <StackPanel Orientation="Horizontal"  VerticalAlignment="Center" Margin="0,0,0,0" Background="#F1F1F1">

                        <!-- Refresh -->
                        <Button Name="btnToolbarRefresh" Margin="2,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/16_Refresh.png" Margin="0,0,5,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Refresh}" Margin="0,0,5,0"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- Edit Dashboard -->
                        <Button Name="btnEditDashboard" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}"
                                         Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsReadOnly, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/32_folder_edit.png" Margin="0,0,3,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Edit}" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>

                        <!-- Finish Editing Dashboard -->
                        <Button Name="btnEditDashboardFinish" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}"
                                         Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/32_folder_edit.png" Margin="0,0,3,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=FinishEditing}" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>

                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center"
                                    Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsLoadingData, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Loading}" Margin="10,0,0,0" FontWeight="Bold"/>
                        </StackPanel>

                    </StackPanel>
                </Border>



            </Grid>

            <!-- widgets -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- watch next episode widget -->
                <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_WatchNextEpisode_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                    <StackPanel Orientation="Horizontal">

                        <!-- Buttons for moving the widget up and down -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="1">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>

                            <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="1">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Widget Style -->
                        <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <ComboBox Name="cboDashWatchNextStyle" VerticalAlignment="Center"></ComboBox>
                        </StackPanel>

                        <!-- Number of Items -->
                        <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                            <extToolkit:IntegerUpDown Name="udItemsWatchNext" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_WatchNext_Items}" />
                        </StackPanel>

                        <!-- Widget Height Buttons -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                            <Button Name="btnWatchNextIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnWatchNextReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Expand / Collapse -->
                        <Button Name="btnExpandDashWatchNext" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashWatchNextEpCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashWatchNextEpExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_WatchNextEp_Recent}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <StackPanel />
                    </StackPanel>
                    
                    
                    
                </Border>

                <ListBox Grid.Column="0" Grid.ColumnSpan="1" BorderThickness="0" HorizontalAlignment="Stretch" Margin="5,0,5,10"
                     Grid.Row="{Binding Path=DashPos_WatchNextEpisode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                     Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashWatchNextEpExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                     VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"
                     ItemTemplateSelector="{StaticResource DashWatchNextTemplateSelector}"
                     ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewEpsWatchNext_Recent}" 
                     Background="Transparent"  VerticalAlignment="Stretch" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>

                <!-- series missing episodes widget -->
                <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5"
                        Grid.Row="{Binding Path=DashPos_SeriesMissingEpisodes_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}">

                    <StackPanel Orientation="Horizontal">

                        <!-- Buttons for moving the widget up and down -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="2">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>

                            <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="2">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Number of Items -->
                        <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="0" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                            <extToolkit:IntegerUpDown Name="udItemsMissingEps" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MissingEps_Items}" />
                        </StackPanel>

                        <!-- Widget Height Buttons -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                            <Button Name="btnMissingEpsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnMissingEpsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Expand / Collapse -->
                        <Button Name="btnExpandDashSeriesMissingEpisodes" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashSeriesMissingEpisodesCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashSeriesMissingEpisodesExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_SeriesMissingEps}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <StackPanel />
                    </StackPanel>

                </Border>

                <ListBox Grid.Column="0" Grid.ColumnSpan="1" BorderThickness="0" HorizontalAlignment="Stretch"  Margin="5,0,5,10"
                     Grid.Row="{Binding Path=DashPos_SeriesMissingEpisodes, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                     Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashSeriesMissingEpisodesExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto"
                     VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"
                     ItemTemplate="{DynamicResource SeriesMissingEpsTemplate}"
                     ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewSeriesMissingEps}" 
                     Background="Transparent"  VerticalAlignment="Stretch" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>

                <!-- mini calendar widget -->
                <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5"
                        Grid.Row="{Binding Path=DashPos_MiniCalendar_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}">

                    <StackPanel Orientation="Horizontal">

                        <!-- Buttons for moving the widget up and down -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="3">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>

                            <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="3">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Number of Days -->
                        <StackPanel Orientation="Horizontal" Grid.Column="3" Grid.Row="0" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Days}" Margin="0,0,5,0"/>
                            <extToolkit:IntegerUpDown Name="udDaysMiniCalendar" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_MiniCalendarDays}" />
                        </StackPanel>

                        <!-- Widget Height Buttons -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                            <Button Name="btnMiniCalendarIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnMiniCalendarReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Expand / Collapse -->
                        <Button Name="btnExpandDashMiniCalendar" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashMiniCalendarCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashMiniCalendarExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_MiniCalendar}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <StackPanel />
                    </StackPanel>

                </Border>

                <ListBox Grid.Column="0" Grid.ColumnSpan="1" BorderThickness="0" HorizontalAlignment="Stretch"  Margin="5,0,5,10"
                     Grid.Row="{Binding Path=DashPos_MiniCalendar, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                     Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashMiniCalendarExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto"
                     VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"
                     ItemTemplate="{DynamicResource MiniCalendarTemplate}"
                     ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewMiniCalendar}" 
                     Background="Transparent"  VerticalAlignment="Stretch" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>

                <!-- recommendation to watch widget -->
                <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_RecWatch_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                    <StackPanel Orientation="Horizontal">

                        <!-- Buttons for moving the widget up and down -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="4">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>

                            <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="4">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Number of Items -->
                        <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                            <extToolkit:IntegerUpDown Name="udItemsRecWatch" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecWatch_Items}" />
                        </StackPanel>

                        <!-- Widget Height Buttons -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                            <Button Name="btnRecWatchIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnRecWatchReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Expand / Collapse -->
                        <Button Name="btnExpandRecWatch" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsWatchCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsWatchExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_RecWatch}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        <StackPanel />
                    </StackPanel>



                </Border>

                <ListBox Grid.Column="0" Grid.ColumnSpan="1" BorderThickness="0" HorizontalAlignment="Stretch"  Margin="5,0,5,10"
                     Grid.Row="{Binding Path=DashPos_RecWatch, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                     Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsWatchExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto"
                     VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"
                     ItemTemplate="{DynamicResource RecWatch_Detailed}"
                     ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewRecommendationsWatch}" 
                     Background="Transparent"  VerticalAlignment="Stretch" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>

                <!-- recommendation to download widget -->
                <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_RecDownload_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                    <StackPanel Orientation="Horizontal">

                        <!-- Buttons for moving the widget up and down -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="5">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>

                            <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="5">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Number of Items -->
                        <StackPanel Orientation="Horizontal" Margin="10,2,2,2" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Items}" Margin="0,0,5,0"/>
                            <extToolkit:IntegerUpDown Name="udItemsRecDownload" Minimum="1" Maximum="100" DefaultValue="10" VerticalAlignment="Center" 
                                      Value="{Binding Source={x:Static local:UserSettingsVM.Instance},Path=Dash_RecDownload_Items}" />
                        </StackPanel>

                        <!-- Widget Height Buttons -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                            <Button Name="btnRecDownloadIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnRecDownloadReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Expand / Collapse -->
                        <Button Name="btnExpandRecDownload" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsDownloadCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsDownloadExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_RecDownload}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>

                                
                            </StackPanel>
                            
                        </Button>

                        <!-- Update Series Info -->
                        <Button Name="btnGetRecDownloadMissingInfo" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/anidb.ico" Margin="0,0,3,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=GetMissingData}" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>
                        
                        <StackPanel />
                    </StackPanel>



                </Border>

                <ListBox Grid.Column="0" Grid.ColumnSpan="1" BorderThickness="0" HorizontalAlignment="Stretch"  Margin="5,0,5,10"
                     Grid.Row="{Binding Path=DashPos_RecDownload, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                     Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashRecommendationsDownloadExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto"
                     VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"
                     ItemTemplate="{DynamicResource RecDownload_Detailed}"
                     ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewRecommendationsDownload}" 
                     Background="Transparent"  VerticalAlignment="Stretch" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>

                <!-- trakt friends widget -->
                <Border BorderBrush="LightGray" BorderThickness="1" Grid.Column="0" Background="#FFE9ECEF" Margin="0,0,0,5" 
                        Grid.Row="{Binding Path=DashPos_TraktFriends_Header, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}" >

                    <StackPanel Orientation="Horizontal">

                        <!-- Buttons for moving the widget up and down -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <Button HorizontalAlignment="Left" Margin="5,0,0,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveUpWidgetCommand}" CommandParameter="6">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_up.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>

                            <Button HorizontalAlignment="Left" Margin="0,0,5,0" Style="{DynamicResource FlatButtonStyle}" Width="Auto"
                                        Command="{DynamicResource MoveDownWidgetCommand}" CommandParameter="6">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_down.png" Margin="0,0,0,0"/>

                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Widget Height Buttons -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding Source={x:Static local:DashboardVM.Instance}, Path=IsBeingEdited, Converter={StaticResource BooleanToVisibilityConverter}}" >
                            <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=ImageSize}" Margin="15,0,3,0"/>

                            <Button Name="btnTraktFriendsIncrease" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_plus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>

                            <Button Name="btnTraktFriendsReduce" Margin="0,2,0,2" Style="{DynamicResource FlatButtonStyle}">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                    <Image Height="16" Width="16" Source="/Images/16_minus.png" Margin="0,0,0,0"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Expand / Collapse -->
                        <Button Name="btnExpandTraktFriends" Margin="5,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >

                                <Image Height="16" Width="16" Source="/Images/64_navdown.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashTraktFriendsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}">
                                </Image>
                                <Image Height="16" Width="16" Source="/Images/64_navup.png" Margin="2,0,2,0"
                                                Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashTraktFriendsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=Dash_TraktFriends}" 
                                          FontWeight="Bold" Margin="0,0,0,0"/>


                            </StackPanel>

                        </Button>

                        <!-- Update Series Info -->
                        <Button Name="btnGetTraktFriendsMissingInfo" Margin="10,2,2,2" Style="{DynamicResource FlatButtonStyle}">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                                <Image Height="16" Width="16" Source="/Images/anidb.ico" Margin="0,0,3,0"/>
                                <TextBlock VerticalAlignment="Center" Text="{Resx ResxName=JMMClient.Properties.Resources, Key=GetMissingData}" Margin="0,0,0,0"/>
                            </StackPanel>
                        </Button>

                        <StackPanel />
                    </StackPanel>



                </Border>

                <ListBox Grid.Column="0" Grid.ColumnSpan="1" BorderThickness="0" HorizontalAlignment="Stretch"  Margin="5,0,5,10"
                     Grid.Row="{Binding Path=DashPos_TraktFriends, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type usercontrols:DashboardControl}}}"
                     Visibility="{Binding Source={x:Static local:UserSettingsVM.Instance}, Path=DashTraktFriendsExpanded, Converter={StaticResource BooleanToVisibilityConverter}}"
                     ScrollViewer.HorizontalScrollBarVisibility="Auto"
                     VirtualizingStackPanel.IsVirtualizing="True" ScrollViewer.CanContentScroll="True"
                     ItemTemplate="{DynamicResource TraktFriendTemplate}"
                     ItemsSource="{Binding Source={x:Static local:DashboardVM.Instance}, Path=ViewTraktFriends}" 
                     Background="Transparent"  VerticalAlignment="Stretch" >
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>

            </Grid>




        </StackPanel>
    </ScrollViewer>

</UserControl>
